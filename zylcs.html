<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨æ„åŠ›è®­ç»ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft Yahei", sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f0f2f5;
            padding: 20px;
        }

        .container {
            text-align: center;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .controls {
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4096ff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #3088ff;
        }

        button:disabled {
            background-color: #a0cfff;
            cursor: not-allowed;
        }

        .timer {
            font-size: 18px;
            margin-bottom: 10px;
            color: #666;
        }

        /* æ–°å¢ä¸‹ä¸€ä¸ªæ•°å­—æç¤ºæ ·å¼ */
        .next-number {
            font-size: 20px;
            font-weight: bold;
            color: #ff7a45;
            margin-bottom: 20px;
            padding: 8px 16px;
            background-color: #fff7e6;
            border-radius: 5px;
            display: inline-block;
        }

        .schulte-grid {
            display: grid;
            grid-template-columns: repeat(5, 60px);
            grid-template-rows: repeat(5, 60px);
            gap: 8px;
            margin-bottom: 20px;
        }

        .grid-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e8f4ff;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: all 0.2s;
        }

        .grid-cell:hover {
            background-color: #d1e7ff;
        }

        .instructions {
            margin-top: 20px;
            font-size: 14px;
            color: #888;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ³¨æ„åŠ›è®­ç»ƒ</h1>
        
        <div class="controls">
            <button id="generateBtn">ç”Ÿæˆæ–°è¡¨</button>
            <button id="resetBtn" disabled>é‡ç½®</button>
        </div>
        
        <div class="timer">è®¡æ—¶: <span id="timeDisplay">00:00.000</span></div>
        
        <!-- æ–°å¢ä¸‹ä¸€ä¸ªæ•°å­—æç¤ºåŒºåŸŸ -->
        <div class="next-number">è¯·ç‚¹å‡»æ•°å­—ï¼š<span id="nextNumDisplay">1</span></div>
        
        <div class="schulte-grid" id="schulteGrid"></div>
        
        <div class="instructions">
            æ“ä½œè¯´æ˜ï¼šç‚¹å‡»"ç”Ÿæˆæ–°è¡¨"å¼€å§‹è®­ç»ƒï¼ŒæŒ‰é¡ºåºç‚¹å‡»æç¤ºçš„æ•°å­—ï¼Œå®Œæˆåä¼šæ˜¾ç¤ºç”¨æ—¶ã€‚<br>
            è®­ç»ƒç›®æ ‡ï¼šé”»ç‚¼æ³¨æ„åŠ›ã€è§†è§‰æœç´¢èƒ½åŠ›å’Œæ‰‹çœ¼åè°ƒèƒ½åŠ›ã€‚
        </div>
    </div>

    <script>
        // è·å–DOMå…ƒç´ 
        const generateBtn = document.getElementById('generateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const timeDisplay = document.getElementById('timeDisplay');
        const schulteGrid = document.getElementById('schulteGrid');
        // æ–°å¢ä¸‹ä¸€ä¸ªæ•°å­—æ˜¾ç¤ºå…ƒç´ 
        const nextNumDisplay = document.getElementById('nextNumDisplay');

        // å…¨å±€å˜é‡
        let timer = null;       // è®¡æ—¶å™¨
        let startTime = 0;      // å¼€å§‹æ—¶é—´
        let elapsedTime = 0;    // å·²ç”¨æ—¶é—´
        let currentNumber = 1;  // å½“å‰éœ€è¦ç‚¹å‡»çš„æ•°å­—
        let isRunning = false;  // æ˜¯å¦æ­£åœ¨è®¡æ—¶

        // ç”Ÿæˆ1-25çš„éšæœºæ•°ç»„
        function generateRandomNumbers() {
            const numbers = Array.from({ length: 25 }, (_, i) => i + 1);
            // éšæœºæ‰“ä¹±æ•°ç»„ï¼ˆFisher-Yates æ´—ç‰Œç®—æ³•ï¼‰
            for (let i = numbers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [numbers[i], numbers[j]] = [numbers[j], numbers[i]];
            }
            return numbers;
        }

        // æ¸²æŸ“èˆ’å°”ç‰¹è¡¨
        function renderGrid() {
            // æ¸…ç©ºç½‘æ ¼
            schulteGrid.innerHTML = '';
            const numbers = generateRandomNumbers();
            
            numbers.forEach(num => {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                cell.textContent = num;
                cell.dataset.num = num;
                
                // å•å…ƒæ ¼ç‚¹å‡»äº‹ä»¶
                cell.addEventListener('click', handleCellClick);
                schulteGrid.appendChild(cell);
            });
        }

        // å¤„ç†å•å…ƒæ ¼ç‚¹å‡»
        function handleCellClick(e) {
            const cell = e.target;
            const clickedNum = parseInt(cell.dataset.num);
            
            // å¦‚æœè¿˜æ²¡å¼€å§‹è®¡æ—¶ï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªæ•°å­—ï¼ˆ1ï¼‰æ—¶å¼€å§‹è®¡æ—¶
            if (clickedNum === 1 && !isRunning) {
                startTimer();
            }
            
            // ç‚¹å‡»æ­£ç¡®çš„æ•°å­—
            if (clickedNum === currentNumber) {
                currentNumber++;
                // æ›´æ–°ä¸‹ä¸€ä¸ªéœ€è¦ç‚¹å‡»çš„æ•°å­—æç¤º
                nextNumDisplay.textContent = currentNumber > 25 ? "å®Œæˆ" : currentNumber;
                
                // å®Œæˆæ‰€æœ‰æ•°å­—ç‚¹å‡»
                if (currentNumber > 25) {
                    stopTimer();
                    // è·å–æ€»ç”¨æ—¶ï¼ˆç§’ï¼‰å¹¶æ˜¾ç¤ºå¯¹åº”æç¤º
                    const totalSeconds = elapsedTime / 1000;
                    const promptText = getResultPrompt(totalSeconds);
                    alert(`${promptText} ä½ çš„ç”¨æ—¶ï¼š${timeDisplay.textContent}`);
                    // ç¦ç”¨ç”ŸæˆæŒ‰é’®ï¼Œå¯ç”¨é‡ç½®æŒ‰é’®
                    generateBtn.disabled = true;
                    resetBtn.disabled = false;
                }
            } 
            // ç‚¹å‡»é”™è¯¯çš„æ•°å­—
            else if (clickedNum > currentNumber) {
                // æ— è§†è§‰åé¦ˆï¼Œä»…ä¸æ¨è¿›è¿›åº¦
            }
        }

        // æ ¹æ®ç”¨æ—¶è·å–å¯¹åº”çš„ç»“ç®—æç¤ºè¯­
        function getResultPrompt(seconds) {
            if (seconds <= 5) {
                return "ğŸ‰ å½»åº•ç¦æ¬²æˆä»™ï¼è„‘åŠ›çˆ†è¡¨ï¼Œæ’¸ç®¡ï¼Ÿä¸å­˜åœ¨çš„ï¼Œç²¾åŠ›å…¨è½¬åŒ–æˆä¸“æ³¨åŠ›ï¼Œä¸–ç•Œçºªå½•ä¿æŒè€…çº§åˆ«";
            } else if (seconds <= 10) {
                return "ğŸŒŸå®Œå…¨æˆ’æ’¸å¤šå¹´ï¼Œè‚¾æ°”å……ç›ˆï¼Œæ³¨æ„åŠ›å¦‚æ¿€å…‰ï¼Œä¸€å‘ä¸æ’¸ï¼Œå¤©ä¸‹æˆ‘æœ‰";
            } else if (seconds <= 15) {
                return "ğŸ‘ ä¸¥æ ¼èŠ‚åˆ¶ï¼Œåªå¶å°”è§£å‹ï¼Œè„‘å­æ¸…æ¾ˆå¦‚æ°´æ™¶ï¼Œä¸“æ³¨åŠ›ç¡¬é‚¦é‚¦";
            } else if (seconds <= 20) {
                return "âœ… é€‚åº¦æ’¸ä¸€æ’¸ï¼Œç”Ÿæ´»å¹³è¡¡ï¼Œæ³¨æ„åŠ›ç¨³å¥ï¼Œä¸å½±å“å¤§äº‹";
            } else if (seconds <= 25) {
                return "ğŸ’ª å‘¨æ’¸å‡ å‘ï¼Œç¨æœ‰ç–²è½¯ï¼Œä½†è¿˜èƒ½é›†ä¸­ï¼Œå°±æ˜¯å¶å°”è„‘é›¾èµ°ç¥";
            } else if (seconds <= 30) {
                return "â° å¤©å¤©æ’¸ä¸€ç®¡ï¼Œè‚¾è™šé¢„è­¦ï¼æ³¨æ„åŠ›å¼€å§‹æ¶£æ•£ï¼Œæ‰¾æ•°å­—åƒå–é†‰äº†";
            } else if (seconds <= 35) {
                return "å¤©å¤©æ’¸ï¼Œè‚¾è™šåˆç°ï¼æ³¨æ„åŠ›æ¶£æ•£ï¼Œå¤šå·´èƒºè€—å°½ï¼Œæ‰¾æ•°å­—éƒ½åƒåœ¨é›¾é‡Œçœ‹èŠ±";
            } else {
                return "æ’¸ç®¡ä¸Šç˜¾ç‹‚é­”ï¼Œè„‘å­æˆæµ†ç³Šï¼è®°å¿†åŠ›ä¸‹é™ã€ç²¾ç¥ç–²ä¹ï¼Œæ•°å­—æ‰¾åŠå¤©ï¼Œç”Ÿæ´»ä¸€å›¢ç³Ÿ";
            }
        }

        // å¼€å§‹è®¡æ—¶å™¨
        function startTimer() {
            startTime = Date.now() - elapsedTime;
            isRunning = true;
            
            timer = setInterval(() => {
                elapsedTime = Date.now() - startTime;
                updateTimeDisplay();
            }, 10);
        }

        // åœæ­¢è®¡æ—¶å™¨
        function stopTimer() {
            clearInterval(timer);
            isRunning = false;
        }

        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateTimeDisplay() {
            const milliseconds = Math.floor((elapsedTime % 1000) / 10);
            const seconds = Math.floor((elapsedTime / 1000) % 60);
            const minutes = Math.floor(elapsedTime / (1000 * 60));
            
            // æ ¼å¼åŒ–æ—¶é—´ï¼ˆè¡¥é›¶ï¼‰
            const formattedMinutes = minutes.toString().padStart(2, '0');
            const formattedSeconds = seconds.toString().padStart(2, '0');
            const formattedMs = milliseconds.toString().padStart(2, '0');
            
            timeDisplay.textContent = `${formattedMinutes}:${formattedSeconds}.${formattedMs}`;
        }

        // é‡ç½®è®­ç»ƒ
        function resetTraining() {
            stopTimer();
            elapsedTime = 0;
            currentNumber = 1;
            isRunning = false;
            updateTimeDisplay();
            // é‡ç½®ä¸‹ä¸€ä¸ªæ•°å­—æç¤ºä¸º1
            nextNumDisplay.textContent = 1;
            generateBtn.disabled = false;
            resetBtn.disabled = true;
            renderGrid();
        }

        // ç»‘å®šæŒ‰é’®äº‹ä»¶
        generateBtn.addEventListener('click', () => {
            resetTraining();
        });

        resetBtn.addEventListener('click', resetTraining);

        // åˆå§‹æ¸²æŸ“
        renderGrid();
    </script>
</body>
</html>